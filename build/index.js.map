{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 6dfbdf18760ebac009ad","webpack:///./src/index.js","webpack:///external \"babel-runtime/helpers/classCallCheck\""],"names":["getClient","GraphQLClient","headers","authorization","token","send","getSchema","introspectionQuery","request","variables","JSON","proxyTypeDefs","getProxyResolvers","Query","Mutation","getTypeDefs","typeDefs","ProxyServer","props","proxyResolvers","resolvers","context","GraphQLServer"],"mappings":"AAAA,eACA,iDADA,CAEA,kBAFA,CAGA,qCAHA,CAIA,4BAJA,CAKA,wBALA,CAMA,4BANA,CAQA,sBACC,CATD,EASC,kCATD,CASC,WACD,M,aCNA,cAGA,QACA,oBAGA,YACA,GADA,CAEA,IAFA,CAGA,UAHA,EAaA,MANA,mCAMA,CAHA,MAGA,UACA,CAxBA,SA4DA,MAhCA,MAgCA,CA7BA,KA6BA,CA1BA,oBACA,QADA,EAEA,2BACA,eADA,CAEA,aAFA,CAGA,KAHA,EAMA,CAkBA,CAfA,gBACA,sBACA,WAA2B,mBAA4B,CADvD,CAEA,WAAiC,QAAe,CAFhD,CAIA,MADA,aACA,EACA,CASA,CANA,kBAAsD,gDAA+D,CAMrH,CAHA,MAGA,S,mRC7DA,M,CACA,M,CACA,O,CACA,O,CACA,O,CAKMA,eAAY,OACd,IAAIC,GAAJ,gBAAuB,CACnBC,QAAS,CAAEC,cAAeC,cAAjB,KADU,CAAvB,CADJ,C,CAQMC,eAAO,sDAAgB,8GACJL,OADI,OACJA,GADI,0HAAhB,wDAAb,C,CAMMM,eAAY,6BAAuBD,QAAiBE,EAAxC,kBAAuBF,CAAzC,C,CAKMG,eAAU,kEACZH,aAAoCI,GAAaC,KADrC,KACqCA,GAAjDL,CADJ,C,CAGaM,kBAAN,mS,CAaDC,aAAoB,oHAInB,CACHC,sCADG,OACHA,WADG,CAKHC,8BALG,CAJP,C,CAiBMC,aAAc,OAChB,oBAAgCC,WAAhC,UAAgCA,CAAhC,CACM,KAFU,YAEV,IADN,EADJ,C,CAQqBC,E,YACjB,aAAmB,0BACTD,GACFE,GAASA,EAATA,SACM,iBACI,WAAuBH,EAAYG,EAHjD,QAGqCH,CAAvB,CADJ,CADNG,EAFW,CAQTC,EAAiBP,EAAmBM,GAASA,EAAnD,KAA0CA,IAAnBN,CARR,CASTQ,EACFF,GAASA,EAATA,UACM,qBAAe,GAAiBA,EAF1C,SAEyB,CAAf,CADNA,EAVW,CAcTG,EAAWH,GAASA,EAA1B,OAAiBA,IAdF,4EAgBT,wBAGFG,SAHE,CAhBS,EAqBlB,C,4BAtBoCC,e,IAApBL,O,gBCrErB,yD,cAAA,oE,cAAA,mD,cAAA,yD,cAAA,8C,cAAA,2D,cAAA,4B,cAAA,oC,cAAA,iC,cAAA,mC,cAAA,0C,IHAA,C","file":"index.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"graphql-proxy\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"graphql-proxy\"] = factory();\n\telse\n\t\troot[\"graphql-proxy\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 6dfbdf18760ebac009ad","import { introspectionQuery } from 'graphql';\nimport { GraphQLClient } from 'graphql-request';\nimport { GraphQLServer } from 'graphql-yoga';\nimport { importSchema } from 'graphql-import';\nimport { mergeTypes, mergeResolvers } from 'merge-graphql-schemas';\n\n/**\n * TODO docs\n */\nconst getClient = (url, token) =>\n    new GraphQLClient(url, {\n        headers: { authorization: token ? `Bearer ${token}` : null }\n    });\n\n/**\n * TODO docs\n */\nconst send = (url, token) => async args =>\n    JSON.stringify(await getClient(url, token).request(args));\n\n/**\n * TODO docs\n */\nconst getSchema = (_, { url, token }) => send(url, token)(introspectionQuery);\n\n/**\n * TODO docs\n */\nconst request = (_, { url, query, mutation, variables, token }) =>\n    send(url, token)(query || mutation, variables && JSON.parse(variables));\n\nexport const proxyTypeDefs = `\n    type Query {\n        schema(url: String!, token: String): String!\n        query(url: String!, query: String!, variables: String, token: String): String!\n    }\n    type Mutation {\n        mutate(url: String!, mutation: String!, variables: String, token: String): String!\n    }\n`;\n\n/**\n * TODO docs\n */\nconst getProxyResolvers = ({\n    query = 'query',\n    mutate = 'mutate',\n    schema = 'schema'\n}) => ({\n    Query: {\n        [schema]: getSchema,\n        [query]: request\n    },\n    Mutation: {\n        [mutate]: request\n    }\n});\n\n/**\n * TODO docs\n */\nconst getTypeDefs = typeDefs =>\n    typeof typeDefs === 'string' && typeDefs.endsWith('.graphql')\n        ? importSchema(typeDefs)\n        : typeDefs;\n\n/**\n * TODO docs\n */\nexport default class ProxyServer extends GraphQLServer {\n    constructor(props) {\n        const typeDefs =\n            props && props.typeDefs\n                ? mergeTypes(\n                      [proxyTypeDefs].concat(getTypeDefs(props.typeDefs))\n                  )\n                : proxyTypeDefs;\n\n        const proxyResolvers = getProxyResolvers((props && props.names) || {});\n        const resolvers =\n            props && props.resolvers\n                ? mergeResolvers([proxyResolvers, props.resolvers])\n                : proxyResolvers;\n\n        const context = (props && props.context) || {};\n\n        super({\n            typeDefs,\n            resolvers,\n            context\n        });\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","module.exports = require(\"babel-runtime/helpers/classCallCheck\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"babel-runtime/helpers/classCallCheck\"\n// module id = 2\n// module chunks = 0"],"sourceRoot":""}